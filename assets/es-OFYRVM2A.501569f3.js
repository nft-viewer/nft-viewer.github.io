import{y as o,z as Oe}from"./index.fd4aa9c6.js";(function(e){e&&(e.global===void 0&&(e.global=e),e.globalThis===void 0&&(e.globalThis=e),e.process===void 0&&(e.process={env:{NODE_ENV:"production"}}))})(typeof window<"u"?window:void 0);var be=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(be||{}),it=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(it||{}),It=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(It||{}),V=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e))(V||{}),Se=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(Se||{}),et=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(et||{}),Zn=(e=>(e.Harmony="HARMONY",e))(Zn||{}),eo=Object.create,Ue=Object.defineProperty,to=Object.defineProperties,ro=Object.getOwnPropertyDescriptor,no=Object.getOwnPropertyDescriptors,oo=Object.getOwnPropertyNames,Lr=Object.getOwnPropertySymbols,io=Object.getPrototypeOf,qr=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,Mr=o((e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"Me"),so=o((e,t)=>{for(var n in t||(t={}))qr.call(t,n)&&Mr(e,n,t[n]);if(Lr)for(var n of Lr(t))ao.call(t,n)&&Mr(e,n,t[n]);return e},"Ne"),uo=o((e,t)=>to(e,no(t)),"we"),co=o(e=>Ue(e,"__esModule",{value:!0}),"$t"),lo=o((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"bt"),fo=o((e,t)=>{for(var n in t)Ue(e,n,{get:t[n],enumerable:!0})},"Mt"),ho=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of oo(t))!qr.call(e,c)&&(n||c!=="default")&&Ue(e,c,{get:()=>t[c],enumerable:!(s=ro(t,c))||s.enumerable});return e},"Nt"),po=o((e,t)=>ho(co(Ue(e!=null?eo(io(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"wt"),pe=o((e,t,n)=>new Promise((s,c)=>{var u=o(I=>{try{v(n.next(I))}catch(y){c(y)}},"o"),g=o(I=>{try{v(n.throw(I))}catch(y){c(y)}},"a"),v=o(I=>I.done?s(I.value):Promise.resolve(I.value).then(u,g),"i");v((n=n.apply(e,t)).next())}),"I"),vo=lo((e,t)=>{var n=Object.prototype.hasOwnProperty,s="~";function c(){}o(c,"B"),Object.create&&(c.prototype=Object.create(null),new c().__proto__||(s=!1));function u(y,E,h){this.fn=y,this.context=E,this.once=h||!1}o(u,"bn");function g(y,E,h,A,j){if(typeof h!="function")throw new TypeError("The listener must be a function");var C=new u(h,A||y,j),x=s?s+E:E;return y._events[x]?y._events[x].fn?y._events[x]=[y._events[x],C]:y._events[x].push(C):(y._events[x]=C,y._eventsCount++),y}o(g,"tt");function v(y,E){--y._eventsCount===0?y._events=new c:delete y._events[E]}o(v,"se");function I(){this._events=new c,this._eventsCount=0}o(I,"g"),I.prototype.eventNames=function(){var y=[],E,h;if(this._eventsCount===0)return y;for(h in E=this._events)n.call(E,h)&&y.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(E)):y},I.prototype.listeners=function(y){var E=s?s+y:y,h=this._events[E];if(!h)return[];if(h.fn)return[h.fn];for(var A=0,j=h.length,C=new Array(j);A<j;A++)C[A]=h[A].fn;return C},I.prototype.listenerCount=function(y){var E=s?s+y:y,h=this._events[E];return h?h.fn?1:h.length:0},I.prototype.emit=function(y,E,h,A,j,C){var x=s?s+y:y;if(!this._events[x])return!1;var T=this._events[x],z=arguments.length,G,B;if(T.fn){switch(T.once&&this.removeListener(y,T.fn,void 0,!0),z){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,E),!0;case 3:return T.fn.call(T.context,E,h),!0;case 4:return T.fn.call(T.context,E,h,A),!0;case 5:return T.fn.call(T.context,E,h,A,j),!0;case 6:return T.fn.call(T.context,E,h,A,j,C),!0}for(B=1,G=new Array(z-1);B<z;B++)G[B-1]=arguments[B];T.fn.apply(T.context,G)}else{var le=T.length,R;for(B=0;B<le;B++)switch(T[B].once&&this.removeListener(y,T[B].fn,void 0,!0),z){case 1:T[B].fn.call(T[B].context);break;case 2:T[B].fn.call(T[B].context,E);break;case 3:T[B].fn.call(T[B].context,E,h);break;case 4:T[B].fn.call(T[B].context,E,h,A);break;default:if(!G)for(R=1,G=new Array(z-1);R<z;R++)G[R-1]=arguments[R];T[B].fn.apply(T[B].context,G)}}return!0},I.prototype.on=function(y,E,h){return g(this,y,E,h,!1)},I.prototype.once=function(y,E,h){return g(this,y,E,h,!0)},I.prototype.removeListener=function(y,E,h,A){var j=s?s+y:y;if(!this._events[j])return this;if(!E)return v(this,j),this;var C=this._events[j];if(C.fn)C.fn===E&&(!A||C.once)&&(!h||C.context===h)&&v(this,j);else{for(var x=0,T=[],z=C.length;x<z;x++)(C[x].fn!==E||A&&!C[x].once||h&&C[x].context!==h)&&T.push(C[x]);T.length?this._events[j]=T.length===1?T[0]:T:v(this,j)}return this},I.prototype.removeAllListeners=function(y){var E;return y?(E=s?s+y:y,this._events[E]&&v(this,E)):(this._events=new c,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=s,I.EventEmitter=I,typeof t<"u"&&(t.exports=I)});function Hr(e){let t={exports:{}};return e(t,t.exports),t.exports}o(Hr,"At");var mo=Number.MAX_SAFE_INTEGER||9007199254740991,wt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:mo,MAX_SAFE_COMPONENT_LENGTH:16},yo=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},q=yo,Fe=Hr(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=wt,s=(t=e.exports={}).re=[],c=t.src=[],u=t.t={},g=0,v=o((I,y,E)=>{let h=g++;q(h,y),u[I]=h,c[h]=y,s[h]=new RegExp(y,E?"g":void 0)},"i");v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","[0-9]+"),v("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),v("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER","[0-9A-Za-z-]+"),v("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),v("FULL",`^${c[u.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),v("LOOSE",`^${c[u.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),v("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),v("COERCERTL",c[u.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0.0.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),$r=/^[0-9]+$/,Xr=o((e,t)=>{let n=$r.test(e),s=$r.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},"Le"),go=o((e,t)=>Xr(t,e),"Ot"),Eo={compareIdentifiers:Xr,rcompareIdentifiers:go},{MAX_LENGTH:Cr,MAX_SAFE_INTEGER:Xe}=wt,{re:Pr,t:jr}=Fe,{compareIdentifiers:$e}=Eo,te=o(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Cr)throw new TypeError(`version is longer than ${Cr} characters`);q("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?Pr[jr.LOOSE]:Pr[jr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let c=+s;if(c>=0&&c<Xe)return c}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(q("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),$e(this.major,e.major)||$e(this.minor,e.minor)||$e(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(q("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return $e(n,s)}while(++t)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(q("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return $e(n,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},"E"),_o=o((e,t,n)=>new te(e,n).compare(new te(t,n)),"_t"),Le=_o,bo=o((e,t,n)=>Le(e,t,n)===0,"Dt"),Io=bo,wo=o((e,t,n)=>Le(e,t,n)!==0,"Jt"),No=wo,Oo=o((e,t,n)=>Le(e,t,n)>0,"Gt"),Ro=Oo,So=o((e,t,n)=>Le(e,t,n)>=0,"Kt"),Ao=So,To=o((e,t,n)=>Le(e,t,n)<0,"Ft"),Lo=To,Mo=o((e,t,n)=>Le(e,t,n)<=0,"Xt"),$o=Mo,Co=o((e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Io(e,n,s);case"!=":return No(e,n,s);case">":return Ro(e,n,s);case">=":return Ao(e,n,s);case"<":return Lo(e,n,s);case"<=":return $o(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}},"Ht"),yt=Co,Ce=Symbol("SemVer ANY"),je=o(class{static get ANY(){return Ce}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof je){if(e.loose===!!t.loose)return e;e=e.value}q("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ce?this.value="":this.value=this.operator+this.semver.version,q("comp",this)}parse(e){let t=this.options.loose?Dr[kr.COMPARATORLOOSE]:Dr[kr.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new te(n[2],this.options.loose):this.semver=Ce}toString(){return this.value}test(e){if(q("Comparator.test",e,this.options.loose),this.semver===Ce||e===Ce)return!0;if(typeof e=="string")try{e=new te(e,this.options)}catch{return!1}return yt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof je))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Te(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Te(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),s=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),c=this.semver.version===e.semver.version,u=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),g=yt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),v=yt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||s||c&&u||g||v}},"O"),{re:Dr,t:kr}=Fe,Te=o(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Te)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Te(e.raw,t);if(e instanceof je)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?ie[re.HYPHENRANGELOOSE]:ie[re.HYPHENRANGE];e=e.replace(n,Xo(this.options.includePrerelease)),q("hyphen replace",e),e=e.replace(ie[re.COMPARATORTRIM],Po),q("comparator trim",e,ie[re.COMPARATORTRIM]),e=(e=(e=e.replace(ie[re.TILDETRIM],jo)).replace(ie[re.CARETTRIM],Do)).split(/\s+/).join(" ");let s=t?ie[re.COMPARATORLOOSE]:ie[re.COMPARATOR];return e.split(" ").map(c=>ko(c,this.options)).join(" ").split(/\s+/).map(c=>Ho(c,this.options)).filter(this.options.loose?c=>!!c.match(s):()=>!0).map(c=>new je(c,this.options))}intersects(e,t){if(!(e instanceof Te))throw new TypeError("a Range is required");return this.set.some(n=>xr(n,t)&&e.set.some(s=>xr(s,t)&&n.every(c=>s.every(u=>c.intersects(u,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new te(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Vo(this.set[t],e,this.options))return!0;return!1}},"N"),{re:ie,t:re,comparatorTrimReplace:Po,tildeTrimReplace:jo,caretTrimReplace:Do}=Fe,xr=o((e,t)=>{let n=!0,s=e.slice(),c=s.pop();for(;n&&s.length;)n=s.every(u=>c.intersects(u,t)),c=s.pop();return n},"ke"),ko=o((e,t)=>(q("comp",e,t),e=Fo(e,t),q("caret",e),e=xo(e,t),q("tildes",e),e=Bo(e,t),q("xrange",e),e=qo(e,t),q("stars",e),e),"Zt"),ue=o(e=>!e||e.toLowerCase()==="x"||e==="*","R"),xo=o((e,t)=>e.trim().split(/\s+/).map(n=>Uo(n,t)).join(" "),"Qt"),Uo=o((e,t)=>{let n=t.loose?ie[re.TILDELOOSE]:ie[re.TILDE];return e.replace(n,(s,c,u,g,v)=>{let I;return q("tilde",e,s,c,u,g,v),ue(c)?I="":ue(u)?I=`>=${c}.0.0 <${+c+1}.0.0-0`:ue(g)?I=`>=${c}.${u}.0 <${c}.${+u+1}.0-0`:v?(q("replaceTilde pr",v),I=`>=${c}.${u}.${g}-${v} <${c}.${+u+1}.0-0`):I=`>=${c}.${u}.${g} <${c}.${+u+1}.0-0`,q("tilde return",I),I})},"en"),Fo=o((e,t)=>e.trim().split(/\s+/).map(n=>Go(n,t)).join(" "),"tn"),Go=o((e,t)=>{q("caret",e,t);let n=t.loose?ie[re.CARETLOOSE]:ie[re.CARET],s=t.includePrerelease?"-0":"";return e.replace(n,(c,u,g,v,I)=>{let y;return q("caret",e,c,u,g,v,I),ue(u)?y="":ue(g)?y=`>=${u}.0.0${s} <${+u+1}.0.0-0`:ue(v)?y=u==="0"?`>=${u}.${g}.0${s} <${u}.${+g+1}.0-0`:`>=${u}.${g}.0${s} <${+u+1}.0.0-0`:I?(q("replaceCaret pr",I),y=u==="0"?g==="0"?`>=${u}.${g}.${v}-${I} <${u}.${g}.${+v+1}-0`:`>=${u}.${g}.${v}-${I} <${u}.${+g+1}.0-0`:`>=${u}.${g}.${v}-${I} <${+u+1}.0.0-0`):(q("no pr"),y=u==="0"?g==="0"?`>=${u}.${g}.${v}${s} <${u}.${g}.${+v+1}-0`:`>=${u}.${g}.${v}${s} <${u}.${+g+1}.0-0`:`>=${u}.${g}.${v} <${+u+1}.0.0-0`),q("caret return",y),y})},"nn"),Bo=o((e,t)=>(q("replaceXRanges",e,t),e.split(/\s+/).map(n=>Wo(n,t)).join(" ")),"rn"),Wo=o((e,t)=>{e=e.trim();let n=t.loose?ie[re.XRANGELOOSE]:ie[re.XRANGE];return e.replace(n,(s,c,u,g,v,I)=>{q("xRange",e,s,c,u,g,v,I);let y=ue(u),E=y||ue(g),h=E||ue(v),A=h;return c==="="&&A&&(c=""),I=t.includePrerelease?"-0":"",y?s=c===">"||c==="<"?"<0.0.0-0":"*":c&&A?(E&&(g=0),v=0,c===">"?(c=">=",E?(u=+u+1,g=0,v=0):(g=+g+1,v=0)):c==="<="&&(c="<",E?u=+u+1:g=+g+1),c==="<"&&(I="-0"),s=`${c+u}.${g}.${v}${I}`):E?s=`>=${u}.0.0${I} <${+u+1}.0.0-0`:h&&(s=`>=${u}.${g}.0${I} <${u}.${+g+1}.0-0`),q("xRange return",s),s})},"sn"),qo=o((e,t)=>(q("replaceStars",e,t),e.trim().replace(ie[re.STAR],"")),"on"),Ho=o((e,t)=>(q("replaceGTE0",e,t),e.trim().replace(ie[t.includePrerelease?re.GTE0PRE:re.GTE0],"")),"an"),Xo=o(e=>(t,n,s,c,u,g,v,I,y,E,h,A,j)=>`${n=ue(s)?"":ue(c)?`>=${s}.0.0${e?"-0":""}`:ue(u)?`>=${s}.${c}.0${e?"-0":""}`:g?`>=${n}`:`>=${n}${e?"-0":""}`} ${I=ue(y)?"":ue(E)?`<${+y+1}.0.0-0`:ue(h)?`<${y}.${+E+1}.0-0`:A?`<=${y}.${E}.${h}-${A}`:e?`<${y}.${E}.${+h+1}-0`:`<=${I}`}`.trim(),"cn"),Vo=o((e,t,n)=>{for(let s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let s=0;s<e.length;s++)if(q(e[s].semver),e[s].semver!==je.ANY&&e[s].semver.prerelease.length>0){let c=e[s].semver;if(c.major===t.major&&c.minor===t.minor&&c.patch===t.patch)return!0}return!1}return!0},"ln"),zo=o((e,t,n)=>{try{t=new Te(t,n)}catch{return!1}return t.test(e)},"Je"),{MAX_LENGTH:Yo}=wt,{re:Ur,t:Fr}=Fe,Ko=o((e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te)return e;if(typeof e!="string"||e.length>Yo||!(t.loose?Ur[Fr.LOOSE]:Ur[Fr.FULL]).test(e))return null;try{return new te(e,t)}catch{return null}},"un"),Jo=Ko,{re:Ve,t:ze}=Fe,Qo=o((e,t)=>{if(e instanceof te)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let s;for(;(s=Ve[ze.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&s.index+s[0].length===n.index+n[0].length||(n=s),Ve[ze.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Ve[ze.COERCERTL].lastIndex=-1}else n=e.match(Ve[ze.COERCE]);return n===null?null:Jo(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)},"Ue");function Vr(e){return String.fromCharCode(parseInt(e.slice(1),16))}o(Vr,"mn");function zr(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}o(zr,"En");function Yr(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,Vr))}o(Yr,"hn");function Kr(e){return decodeURIComponent(Array.from(atob(e),zr).join(""))}o(Kr,"fn");function Nt(e){return Yr(JSON.stringify(e))}o(Nt,"Q");function Jr(e){return JSON.parse(Kr(e))}o(Jr,"Ke");function Ae(e){return typeof e>"u"}o(Ae,"$");function Qr(e){return e===null}o(Qr,"Rn");function Ot(e){return Qr(e)||Ae(e)}o(Ot,"ee");function Zr(e){return Ot(e)?!1:!Ae(e.jsonrpc)&&!Ae(e.id)&&(!Ae(e.result)||!Ae(e.error))}o(Zr,"je");function en(e){return Ot(e)?!1:typeof e=="number"&&Object.values(It).includes(e)}o(en,"Fe");function tt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}o(tt,"te");var Z={};function tn(e,t){return Object.assign(Z,t),e}o(tn,"Tn");var Zo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn"},Ie=o(class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Ie.prototype)}},"b"),rt=o(class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=en(t)?t:It.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,Object.setPrototypeOf(this,rt.prototype)}},"w"),Rt=o(class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},"W"),rn=o(class extends Error{constructor(e,t,n,s){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=s,this.__proto__=Error,Object.setPrototypeOf(this,rn.prototype)}},"X"),Gr=o(class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`}log(){console.warn(this.message)}},"re");function nn(){return new Ie(be.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}o(nn,"Xe");function on(){return new Ie(be.ModalNotReady,"Modal is not ready.")}o(on,"cr");function an(){return new Ie(be.MalformedResponse,"Response from the Magic iframe is malformed.")}o(an,"Be");function sn(e){return new Ie(be.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}o(sn,"He");function un(e){let t=`Some extensions are incompatible with \`${Z.sdkName}@${Z.version}\`:`;return e.filter(n=>typeof n.compat<"u"&&n.compat!==null).forEach(n=>{let s=n.compat[Z.sdkName];typeof s=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${s}\``:s||(t+=`
  - Extension \`${n.name}\` does not support ${Z.platform} environments.`)}),new Ie(be.IncompatibleExtensions,t)}o(un,"Ve");function cn(e){let t=o(n=>{let s=n+1,c=s%10,u=s%100;return c===1&&u!==11?`${s}st`:c===2&&u!==12?`${s}nd`:c===3&&u!==13?`${s}rd`:`${s}th`},"e");return new Ie(be.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}o(cn,"ze");function ln(){return new Rt(it.DuplicateIframe,"Duplicate iframes found.")}o(ln,"lr");function fn(){return new Rt(it.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}o(fn,"Ye");function dn(){return new Rt(it.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Z.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}o(dn,"Ze");function*hn(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}o(hn,"xn");var ei=hn();function St(){return ei.next().value}o(St,"Ee");var pn=Symbol("Payload pre-processed by Magic SDK");function At(e){return Object.defineProperty(e,pn,{value:!0,enumerable:!1}),e}o(At,"et");function vn(e){return!!e[pn]}o(vn,"Pn");function De(e){var t,n,s;return vn(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=St(),e.method=(n=e.method)!=null?n:"noop",e.params=(s=e.params)!=null?s:[],At(e)),e}o(De,"C");function se(e,t=[]){return At({params:t,method:e,jsonrpc:"2.0",id:St()})}o(se,"h");var Tt=o(class{constructor(e){e instanceof Tt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Zr(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},"_"),ti=po(vo()),ri=o(class extends ti.default{},"st");function Lt(){let e=new ri;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...s)=>(e[t].apply(e,s),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}o(Lt,"oe");var mn=Symbol("isPromiEvent");function yn(e){return!!e[mn]}o(yn,"it");function Mt(e){let t=$t(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:s}=Lt(),c=Symbol("Promise.then"),u=Symbol("Promise.catch"),g=Symbol("Promise.finally"),v=o((E,h)=>(...A)=>{let j=h[E].apply(h,A);return I(j)},"i"),I=o(E=>Object.assign(E,{[mn]:!0,[c]:E[c]||E.then,[u]:E[u]||E.catch,[g]:E[g]||E.finally,then:v(c,E),catch:v(u,E),finally:v(g,E),on:s("on",E),once:s("once",E),addListener:s("addListener",E),off:s("off",E),removeListener:s("removeListener",E),removeAllListeners:s("removeAllListeners",E),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),"c"),y=I(t.then(E=>(y.emit("done",E),y.emit("settled"),E),E=>{throw y.emit("error",E),y.emit("settled"),E}));return y}o(Mt,"ie");function $t(e){return new Promise((t,n)=>{let s=e(t,n);Promise.resolve(s).catch(n)})}o($t,"fe");var Ge=o(class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(et.MAGIC_HANDLE_REQUEST,De(e)),n=Mt((c,u)=>{t.then(g=>{if(s(),g.hasError)u(new rt(g.payload.error));else if(g.hasResult)c(g.payload.result);else throw an()}).catch(g=>{s(),u(g)})}),s=this.overlay.on(Se.MAGIC_HANDLE_EVENT,c=>{var u;let{response:g}=c.data;if(g.id===e.id&&((u=g.result)==null?void 0:u.event)){let{event:v,params:I=[]}=g.result;n.emit(v,...I)}});return n}},"P"),ni=o(class extends Ge{loginWithMagicLink(e){let{email:t,showUI:n=!0,redirectURI:s}=e,c=se(this.sdk.testMode?V.LoginWithMagicLinkTestMode:V.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:s}]);return this.request(c)}loginWithSMS(e){let{phoneNumber:t}=e,n=se(this.sdk.testMode?V.LoginWithSmsTestMode:V.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){let{email:t}=e,n=se(this.sdk.testMode?V.LoginWithEmailOTPTestMode:V.LoginWithEmailOTP,[{email:t,showUI:!0}]);return this.request(n)}loginWithCredential(e){let t=e!=null?e:"";if(!e&&Z.platform==="web"){t=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s)}let n=se(this.sdk.testMode?V.LoginWithCredentialTestMode:V.LoginWithCredential,[t]);return this.request(n)}},"ye"),gn={};fo(gn,{clear:()=>oi,getItem:()=>ke,iterate:()=>ui,key:()=>ai,keys:()=>si,length:()=>ii,removeItem:()=>Et,setItem:()=>nt});var Ye;function ve(e){return(...t)=>pe(this,null,function*(){return Ye||(Ye=yield Z.configureStorage()),yield Ye.ready(),Ye[e](...t)})}o(ve,"L");var ke=ve("getItem"),nt=ve("setItem"),Et=ve("removeItem"),oi=ve("clear"),ii=ve("length"),ai=ve("key"),si=ve("keys"),ui=ve("iterate");function En(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}o(En,"at");var Ct="STORE_KEY_PRIVATE_KEY",ot="STORE_KEY_PUBLIC_JWK",Pt="ECDSA",_n="P-256",ci={name:Pt,namedCurve:_n},li={name:Pt,namedCurve:_n};function bn(){Et(ot),Et(Ct)}o(bn,"lt");function In(){return pe(this,null,function*(){let e=yield wn();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield ke(Ct);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let s={iat:Math.floor(new Date().getTime()/1e3),jti:En()},c={typ:"dpop+jwt",alg:"ES256",jwk:e},u={protected:_t(JSON.stringify(c)),claims:_t(JSON.stringify(s))},g=Rn(`${u.protected}.${u.claims}`),v={name:Pt,hash:{name:"SHA-256"}},I=An(new Uint8Array(yield t.sign(v,n,g)));return`${u.protected}.${u.claims}.${I}`})}o(In,"pt");function wn(){return pe(this,null,function*(){if(!On()){console.info("webcrypto is not supported");return}return(yield ke(ot))||(yield Nn()),ke(ot)})}o(wn,"Dn");function Nn(){return pe(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(ci,!0,["sign"]),s=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let c=yield t.importKey("jwk",s,li,!1,["sign"]);yield nt(Ct,c),yield nt(ot,e)})}o(Nn,"kn");function On(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}o(On,"Jn");function _t(e){return jt(Sn(e))}o(_t,"ut");function Rn(e){return new TextEncoder().encode(e)}o(Rn,"qn");function jt(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}o(jt,"dt");function Sn(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}o(Sn,"Gn");function An(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),jt(t)}o(An,"Un");var fi=o(class extends Ge{getIdToken(e){let t=se(this.sdk.testMode?V.GetIdTokenTestMode:V.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=se(this.sdk.testMode?V.GenerateIdTokenTestMode:V.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=se(this.sdk.testMode?V.GetMetadataTestMode:V.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:n=!0}=e,s=se(this.sdk.testMode?V.UpdateEmailTestMode:V.UpdateEmail,[{email:t,showUI:n}]);return this.request(s)}isLoggedIn(){let e=se(this.sdk.testMode?V.IsLoggedInTestMode:V.IsLoggedIn);return this.request(e)}logout(){bn();let e=se(this.sdk.testMode?V.LogoutTestMode:V.Logout);return this.request(e)}showSettings(){let e=se(this.sdk.testMode?V.UserSettingsTestMode:V.UserSettings);return this.request(e)}},"Te"),{createBoundEmitterMethod:Ke,createChainingEmitterMethod:Re}=Lt(),di=o(class extends Ge{constructor(){super(...arguments),this.isMagic=!0,this.on=Re("on",this),this.once=Re("once",this),this.addListener=Re("addListener",this),this.off=Re("off",this),this.removeListener=Re("removeListener",this),this.removeAllListeners=Re("removeAllListeners",this),this.emit=Ke("emit"),this.eventNames=Ke("eventNames"),this.listeners=Ke("listeners"),this.listenerCount=Ke("listenerCount")}sendAsync(e,t){if(!t)throw cn({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(et.MAGIC_HANDLE_REQUEST,e.map(n=>{let s=De(n);return this.prefixPayloadMethodForTestMode(s),s})).then(n=>{t(null,n.map(s=>uo(so({},s.payload),{error:s.hasError?new rt(s.payload.error):null})))});else{let n=De(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(et.MAGIC_HANDLE_REQUEST,n).then(s=>{t(s.hasError?new rt(s.payload.error):null,s.payload)})}}send(e,t){if(typeof e=="string"){let s=se(e,Array.isArray(t)?t:[]);return this.request(s)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=fn();return n.log(),new Tt(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=se("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},"ve");function xe(e,t){return t?new URL(e,t):new URL(e)}o(xe,"xe");var Br=["request","overlay","sdk"];function Tn(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==Ge.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}o(Tn,"Kn");var Ln=o(class extends Ge{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Mt,isPromiEvent:yn,encodeJSON:Nt,decodeJSON:Jr,createJsonRpcRequestPayload:se,standardizeJsonRpcRequestPayload:De,storage:gn};let e=[this,...Tn(this)];Br.forEach(t=>{let n=e.map(g=>Object.getOwnPropertyDescriptor(g,t)),s=n.findIndex(g=>!!g),c=s>0,u=n[s];u&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:u,isPrototypeField:c}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw sn(t)}}))})}init(e){this.__is_initialized__||(Br.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(t);s?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:s}=e,c=s?` Use \`${s}\` instead.`:"",u=`\`${t}\` will be removed from this Extension in version \`${n}\`.${c}`;return new Gr(this,"DEPRECATION_NOTICE",u)}createWarning(e,t){return new Gr(this,e,t)}createError(e,t,n){return new rn(this,e,t,n)}},"Ie"),hi=o(class extends Ln{},"ht"),Pe=o(class extends Ln{},"S");Pe.Internal=hi,Pe.Anonymous="anonymous extension";function bt(e){return e.compat&&e.compat[Z.sdkName]!=null?typeof e.compat[Z.sdkName]=="string"?zo(Qo(Z.version),e.compat[Z.sdkName]):!!e.compat[Z.sdkName]:!0}o(bt,"ft");function Mn(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],s={},c=[];if(Array.isArray(n)?n.forEach(u=>{bt(u)?(u.init(this),(u.name||u.name!==Pe.Anonymous)&&(this[u.name]=u),u instanceof Pe.Internal&&(tt(u.config)||(s[u.name]=u.config))):c.push(u)}):Object.keys(n).forEach(u=>{if(bt(n[u])){n[u].init(this);let g=n[u];this[u]=g,g instanceof Pe.Internal&&(tt(g.config)||(s[n[u].name]=g.config))}else c.push(n[u])}),c.length)throw un(c);return s}o(Mn,"jn");var Qe=o(class{constructor(e,t){this.apiKey=e;var n;if(!e)throw nn();Z.platform==="react-native"&&(t==null?void 0:t.endpoint)&&dn().log();let{defaultEndpoint:s,version:c}=Z;this.testMode=!!(t!=null&&t.testMode),this.endpoint=xe((n=t==null?void 0:t.endpoint)!=null?n:s).origin,this.auth=new ni(this),this.user=new fi(this),this.rpcProvider=new di(this);let u=Mn.call(this,t);this.parameters=Nt({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:xe(this.endpoint).host,sdk:Zo[Z.sdkName],version:c,ext:tt(u)?void 0:u,locale:(t==null?void 0:t.locale)||"en_US"})}get overlay(){if(!Qe.__overlays__.has(this.parameters)){let e=new Z.ViewController(this.endpoint,this.parameters);e.init(),Qe.__overlays__.set(this.parameters,e)}return Qe.__overlays__.get(this.parameters)}preload(){return pe(this,null,function*(){yield this.overlay.ready})}},"V"),$n=Qe;$n.__overlays__=new Map;function Cn(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}o(Cn,"Fn");function Pn(e,t){var n;let s=(n=t.data.response)==null?void 0:n.id,c=Cn(e,s);if(s&&c){let u=new Tt(c).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:s,response:u}}return{}}o(Pn,"Wn");function jn(e,t){return pe(this,null,function*(){let n=yield ke("rt"),s;if(Z.platform==="web")try{s=yield In()}catch(c){console.error("webcrypto error",c)}return s?n?{msgType:e,payload:t,jwt:s,rt:n}:{msgType:e,payload:t,jwt:s}:{msgType:e,payload:t}})}o(jn,"Xn");function Dn(e){return pe(this,null,function*(){!e.data.rt||(yield nt("rt",e.data.rt))})}o(Dn,"Bn");var pi=o(class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return pe(this,null,function*(){return $t(n=>pe(this,null,function*(){yield this.ready;let s=[],c=Array.isArray(t)?t.map(I=>I.id):[],u=yield jn(`${e}-${this.parameters}`,t);yield this._post(u);let g=o(I=>y=>{let{id:E,response:h}=Pn(t,y);Dn(y),E&&h&&Array.isArray(t)&&c.includes(E)?(s.push(h),s.length===t.length&&(I(),n(s))):E&&h&&!Array.isArray(t)&&E===t.id&&(I(),n(h))},"i"),v=this.on(Se.MAGIC_HANDLE_RESPONSE,g(()=>v()))}))})}on(e,t){let n=t.bind(window),s=o(c=>{c.data.msgType===`${e}-${this.parameters}`&&n(c)},"s");return this.messageHandlers.add(s),()=>this.messageHandlers.delete(s)}waitForReady(){return new Promise(e=>{this.on(Se.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Se.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Se.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},"yt"),vi=Object.create,Dt=Object.defineProperty,mi=Object.getOwnPropertyDescriptor,yi=Object.getOwnPropertyNames,gi=Object.getPrototypeOf,Ei=Object.prototype.hasOwnProperty,_i=o(e=>Dt(e,"__esModule",{value:!0}),"tt"),Je=(e=>typeof Oe<"u"?Oe:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof Oe<"u"?Oe:t)[n]}):e)(function(e){if(typeof Oe<"u")return Oe.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),kn=o((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"$e"),bi=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of yi(t))!Ei.call(e,c)&&(n||c!=="default")&&Dt(e,c,{get:()=>t[c],enumerable:!(s=mi(t,c))||s.enumerable});return e},"nt"),xn=o((e,t)=>bi(_i(Dt(e!=null?vi(gi(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"Ze"),Ze=o((e,t,n)=>new Promise((s,c)=>{var u=o(I=>{try{v(n.next(I))}catch(y){c(y)}},"Q"),g=o(I=>{try{v(n.throw(I))}catch(y){c(y)}},"C"),v=o(I=>I.done?s(I.value):Promise.resolve(I.value).then(u,g),"Y");v((n=n.apply(e,t)).next())}),"se"),Ii=kn((e,t)=>{(function(n){if(typeof e=="object"&&typeof t<"u")t.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var s;typeof window<"u"?s=window:typeof globalThis<"u"?s=globalThis:typeof self<"u"?s=self:s=this,s.localforage=n()}})(function(){return o(function n(s,c,u){function g(y,E){if(!c[y]){if(!s[y]){var h=typeof Je=="function"&&Je;if(!E&&h)return h(y,!0);if(v)return v(y,!0);var A=new Error("Cannot find module '"+y+"'");throw A.code="MODULE_NOT_FOUND",A}var j=c[y]={exports:{}};s[y][0].call(j.exports,function(C){var x=s[y][1][C];return g(x||C)},j,j.exports,n,s,c,u)}return c[y].exports}o(g,"Y");for(var v=typeof Je=="function"&&Je,I=0;I<u.length;I++)g(u[I]);return g},"L")({1:[function(n,s,c){(function(u){var g=u.MutationObserver||u.WebKitMutationObserver,v;if(g){var I=0,y=new g(C),E=u.document.createTextNode("");y.observe(E,{characterData:!0}),v=o(function(){E.data=I=++I%2},"S")}else if(!u.setImmediate&&typeof u.MessageChannel<"u"){var h=new u.MessageChannel;h.port1.onmessage=C,v=o(function(){h.port2.postMessage(0)},"S")}else"document"in u&&"onreadystatechange"in u.document.createElement("script")?v=o(function(){var T=u.document.createElement("script");T.onreadystatechange=function(){C(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},u.document.documentElement.appendChild(T)},"S"):v=o(function(){setTimeout(C,0)},"S");var A,j=[];function C(){A=!0;for(var T,z,G=j.length;G;){for(z=j,j=[],T=-1;++T<G;)z[T]();G=j.length}A=!1}o(C,"z"),s.exports=x;function x(T){j.push(T)===1&&!A&&v()}o(x,"q")}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,s,c){var u=n(1);function g(){}o(g,"Y");var v={},I=["REJECTED"],y=["FULFILLED"],E=["PENDING"];s.exports=h;function h(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=E,this.queue=[],this.outcome=void 0,R!==g&&x(this,R)}o(h,"m"),h.prototype.catch=function(R){return this.then(null,R)},h.prototype.then=function(R,U){if(typeof R!="function"&&this.state===y||typeof U!="function"&&this.state===I)return this;var D=new this.constructor(g);if(this.state!==E){var F=this.state===y?R:U;j(D,F,this.outcome)}else this.queue.push(new A(D,R,U));return D};function A(R,U,D){this.promise=R,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}o(A,"w"),A.prototype.callFulfilled=function(R){v.resolve(this.promise,R)},A.prototype.otherCallFulfilled=function(R){j(this.promise,this.onFulfilled,R)},A.prototype.callRejected=function(R){v.reject(this.promise,R)},A.prototype.otherCallRejected=function(R){j(this.promise,this.onRejected,R)};function j(R,U,D){u(function(){var F;try{F=U(D)}catch(Y){return v.reject(R,Y)}F===R?v.reject(R,new TypeError("Cannot resolve promise with itself")):v.resolve(R,F)})}o(j,"N"),v.resolve=function(R,U){var D=T(C,U);if(D.status==="error")return v.reject(R,D.value);var F=D.value;if(F)x(R,F);else{R.state=y,R.outcome=U;for(var Y=-1,Q=R.queue.length;++Y<Q;)R.queue[Y].callFulfilled(U)}return R},v.reject=function(R,U){R.state=I,R.outcome=U;for(var D=-1,F=R.queue.length;++D<F;)R.queue[D].callRejected(U);return R};function C(R){var U=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof U=="function")return function(){U.apply(R,arguments)}}o(C,"z");function x(R,U){var D=!1;function F(oe){D||(D=!0,v.reject(R,oe))}o(F,"B");function Y(oe){D||(D=!0,v.resolve(R,oe))}o(Y,"H");function Q(){U(Y,F)}o(Q,"j");var ne=T(Q);ne.status==="error"&&F(ne.value)}o(x,"q");function T(R,U){var D={};try{D.value=R(U),D.status="success"}catch(F){D.status="error",D.value=F}return D}o(T,"F"),h.resolve=z;function z(R){return R instanceof this?R:v.resolve(new this(g),R)}o(z,"k"),h.reject=G;function G(R){var U=new this(g);return v.reject(U,R)}o(G,"U"),h.all=B;function B(R){var U=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=R.length,F=!1;if(!D)return this.resolve([]);for(var Y=new Array(D),Q=0,ne=-1,oe=new this(g);++ne<D;)ce(R[ne],ne);return oe;function ce(fe,me){U.resolve(fe).then(ye,function(de){F||(F=!0,v.reject(oe,de))});function ye(de){Y[me]=de,++Q===D&&!F&&(F=!0,v.resolve(oe,Y))}o(ye,"s")}}o(B,"ae"),h.race=le;function le(R){var U=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=R.length,F=!1;if(!D)return this.resolve([]);for(var Y=-1,Q=new this(g);++Y<D;)ne(R[Y]);return Q;function ne(oe){U.resolve(oe).then(function(ce){F||(F=!0,v.resolve(Q,ce))},function(ce){F||(F=!0,v.reject(Q,ce))})}}o(le,"re")},{1:1}],3:[function(n,s,c){(function(u){typeof u.Promise!="function"&&(u.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,s,c){var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function g(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}o(g,"Y");function v(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}o(v,"S");var I=v();function y(){try{if(!I||!I.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}o(y,"K");function E(r,i){r=r||[],i=i||{};try{return new Blob(r,i)}catch(d){if(d.name!=="TypeError")throw d;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,f=new a,l=0;l<r.length;l+=1)f.append(r[l]);return f.getBlob(i.type)}}o(E,"Z"),typeof Promise>"u"&&n(3);var h=Promise;function A(r,i){i&&r.then(function(a){i(null,a)},function(a){i(a)})}o(A,"w");function j(r,i,a){typeof i=="function"&&r.then(i),typeof a=="function"&&r.catch(a)}o(j,"N");function C(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}o(C,"z");function x(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}o(x,"q");var T="local-forage-detect-blob-support",z=void 0,G={},B=Object.prototype.toString,le="readonly",R="readwrite";function U(r){for(var i=r.length,a=new ArrayBuffer(i),f=new Uint8Array(a),l=0;l<i;l++)f[l]=r.charCodeAt(l);return a}o(U,"R");function D(r){return new h(function(i){var a=r.transaction(T,R),f=E([""]);a.objectStore(T).put(f,"key"),a.onabort=function(l){l.preventDefault(),l.stopPropagation(),i(!1)},a.oncomplete=function(){var l=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);i(d||!l||parseInt(l[1],10)>=43)}}).catch(function(){return!1})}o(D,"I");function F(r){return typeof z=="boolean"?h.resolve(z):D(r).then(function(i){return z=i,z})}o(F,"B");function Y(r){var i=G[r.name],a={};a.promise=new h(function(f,l){a.resolve=f,a.reject=l}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}o(Y,"H");function Q(r){var i=G[r.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}o(Q,"j");function ne(r,i){var a=G[r.name],f=a.deferredOperations.pop();if(f)return f.reject(i),f.promise}o(ne,"J");function oe(r,i){return new h(function(a,f){if(G[r.name]=G[r.name]||$(),r.db)if(i)Y(r),r.db.close();else return a(r.db);var l=[r.name];i&&l.push(r.version);var d=I.open.apply(I,l);i&&(d.onupgradeneeded=function(m){var b=d.result;try{b.createObjectStore(r.storeName),m.oldVersion<=1&&b.createObjectStore(T)}catch(O){if(O.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+m.oldVersion+" to version "+m.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw O}}),d.onerror=function(m){m.preventDefault(),f(d.error)},d.onsuccess=function(){a(d.result),Q(r)}})}o(oe,"$");function ce(r){return oe(r,!1)}o(ce,"ee");function fe(r){return oe(r,!0)}o(fe,"oe");function me(r,i){if(!r.db)return!0;var a=!r.db.objectStoreNames.contains(r.storeName),f=r.version<r.db.version,l=r.version>r.db.version;if(f&&(r.version!==i&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),l||a){if(a){var d=r.db.version+1;d>r.version&&(r.version=d)}return!0}return!1}o(me,"a");function ye(r){return new h(function(i,a){var f=new FileReader;f.onerror=a,f.onloadend=function(l){var d=btoa(l.target.result||"");i({__local_forage_encoded_blob:!0,data:d,type:r.type})},f.readAsBinaryString(r)})}o(ye,"s");function de(r){var i=U(atob(r.data));return E([i],{type:r.type})}o(de,"v");function p(r){return r&&r.__local_forage_encoded_blob}o(p,"b");function _(r){var i=this,a=i._initReady().then(function(){var f=G[i._dbInfo.name];if(f&&f.dbReady)return f.dbReady});return j(a,r,r),a}o(_,"_");function S(r){Y(r);for(var i=G[r.name],a=i.forages,f=0;f<a.length;f++){var l=a[f];l._dbInfo.db&&(l._dbInfo.db.close(),l._dbInfo.db=null)}return r.db=null,ce(r).then(function(d){return r.db=d,me(r)?fe(r):d}).then(function(d){r.db=i.db=d;for(var m=0;m<a.length;m++)a[m]._dbInfo.db=d}).catch(function(d){throw ne(r,d),d})}o(S,"E");function L(r,i,a,f){f===void 0&&(f=1);try{var l=r.db.transaction(r.storeName,i);a(null,l)}catch(d){if(f>0&&(!r.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return h.resolve().then(function(){if(!r.db||d.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),fe(r)}).then(function(){return S(r).then(function(){L(r,i,a,f-1)})}).catch(a);a(d)}}o(L,"D");function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}o($,"G");function P(r){var i=this,a={db:null};if(r)for(var f in r)a[f]=r[f];var l=G[a.name];l||(l=$(),G[a.name]=l),l.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=_);var d=[];function m(){return h.resolve()}o(m,"f");for(var b=0;b<l.forages.length;b++){var O=l.forages[b];O!==i&&d.push(O._initReady().catch(m))}var N=l.forages.slice(0);return h.all(d).then(function(){return a.db=l.db,ce(a)}).then(function(w){return a.db=w,me(a,i._defaultConfig.version)?fe(a):w}).then(function(w){a.db=l.db=w,i._dbInfo=a;for(var M=0;M<N.length;M++){var k=N[M];k!==i&&(k._dbInfo.db=a.db,k._dbInfo.version=a.version)}})}o(P,"fe");function X(r,i){var a=this;r=C(r);var f=new h(function(l,d){a.ready().then(function(){L(a._dbInfo,le,function(m,b){if(m)return d(m);try{var O=b.objectStore(a._dbInfo.storeName),N=O.get(r);N.onsuccess=function(){var w=N.result;w===void 0&&(w=null),p(w)&&(w=de(w)),l(w)},N.onerror=function(){d(N.error)}}catch(w){d(w)}})}).catch(d)});return A(f,i),f}o(X,"ie");function ee(r,i){var a=this,f=new h(function(l,d){a.ready().then(function(){L(a._dbInfo,le,function(m,b){if(m)return d(m);try{var O=b.objectStore(a._dbInfo.storeName),N=O.openCursor(),w=1;N.onsuccess=function(){var M=N.result;if(M){var k=M.value;p(k)&&(k=de(k));var H=r(k,M.key,w++);H!==void 0?l(H):M.continue()}else l()},N.onerror=function(){d(N.error)}}catch(M){d(M)}})}).catch(d)});return A(f,i),f}o(ee,"ce");function _e(r,i,a){var f=this;r=C(r);var l=new h(function(d,m){var b;f.ready().then(function(){return b=f._dbInfo,B.call(i)==="[object Blob]"?F(b.db).then(function(O){return O?i:ye(i)}):i}).then(function(O){L(f._dbInfo,R,function(N,w){if(N)return m(N);try{var M=w.objectStore(f._dbInfo.storeName);O===null&&(O=void 0);var k=M.put(O,r);w.oncomplete=function(){O===void 0&&(O=null),d(O)},w.onabort=w.onerror=function(){var H=k.error?k.error:k.transaction.error;m(H)}}catch(H){m(H)}})}).catch(m)});return A(l,a),l}o(_e,"nr");function ge(r,i){var a=this;r=C(r);var f=new h(function(l,d){a.ready().then(function(){L(a._dbInfo,R,function(m,b){if(m)return d(m);try{var O=b.objectStore(a._dbInfo.storeName),N=O.delete(r);b.oncomplete=function(){l()},b.onerror=function(){d(N.error)},b.onabort=function(){var w=N.error?N.error:N.transaction.error;d(w)}}catch(w){d(w)}})}).catch(d)});return A(f,i),f}o(ge,"or");function we(r){var i=this,a=new h(function(f,l){i.ready().then(function(){L(i._dbInfo,R,function(d,m){if(d)return l(d);try{var b=m.objectStore(i._dbInfo.storeName),O=b.clear();m.oncomplete=function(){f()},m.onabort=m.onerror=function(){var N=O.error?O.error:O.transaction.error;l(N)}}catch(N){l(N)}})}).catch(l)});return A(a,r),a}o(we,"ir");function kt(r){var i=this,a=new h(function(f,l){i.ready().then(function(){L(i._dbInfo,le,function(d,m){if(d)return l(d);try{var b=m.objectStore(i._dbInfo.storeName),O=b.count();O.onsuccess=function(){f(O.result)},O.onerror=function(){l(O.error)}}catch(N){l(N)}})}).catch(l)});return A(a,r),a}o(kt,"ar");function xt(r,i){var a=this,f=new h(function(l,d){if(r<0){l(null);return}a.ready().then(function(){L(a._dbInfo,le,function(m,b){if(m)return d(m);try{var O=b.objectStore(a._dbInfo.storeName),N=!1,w=O.openKeyCursor();w.onsuccess=function(){var M=w.result;if(!M){l(null);return}r===0||N?l(M.key):(N=!0,M.advance(r))},w.onerror=function(){d(w.error)}}catch(M){d(M)}})}).catch(d)});return A(f,i),f}o(xt,"fr");function Ut(r){var i=this,a=new h(function(f,l){i.ready().then(function(){L(i._dbInfo,le,function(d,m){if(d)return l(d);try{var b=m.objectStore(i._dbInfo.storeName),O=b.openKeyCursor(),N=[];O.onsuccess=function(){var w=O.result;if(!w){f(N);return}N.push(w.key),w.continue()},O.onerror=function(){l(O.error)}}catch(w){l(w)}})}).catch(l)});return A(a,r),a}o(Ut,"ur");function Ft(r,i){i=x.apply(this,arguments);var a=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a.name,r.storeName=r.storeName||a.storeName);var f=this,l;if(!r.name)l=h.reject("Invalid arguments");else{var d=r.name===a.name&&f._dbInfo.db,m=d?h.resolve(f._dbInfo.db):ce(r).then(function(b){var O=G[r.name],N=O.forages;O.db=b;for(var w=0;w<N.length;w++)N[w]._dbInfo.db=b;return b});r.storeName?l=m.then(function(b){if(b.objectStoreNames.contains(r.storeName)){var O=b.version+1;Y(r);var N=G[r.name],w=N.forages;b.close();for(var M=0;M<w.length;M++){var k=w[M];k._dbInfo.db=null,k._dbInfo.version=O}var H=new h(function(W,J){var K=I.open(r.name,O);K.onerror=function(ae){var vt=K.result;vt.close(),J(ae)},K.onupgradeneeded=function(){var ae=K.result;ae.deleteObjectStore(r.storeName)},K.onsuccess=function(){var ae=K.result;ae.close(),W(ae)}});return H.then(function(W){N.db=W;for(var J=0;J<w.length;J++){var K=w[J];K._dbInfo.db=W,Q(K._dbInfo)}}).catch(function(W){throw(ne(r,W)||h.resolve()).catch(function(){}),W})}}):l=m.then(function(b){Y(r);var O=G[r.name],N=O.forages;b.close();for(var w=0;w<N.length;w++){var M=N[w];M._dbInfo.db=null}var k=new h(function(H,W){var J=I.deleteDatabase(r.name);J.onerror=J.onblocked=function(K){var ae=J.result;ae&&ae.close(),W(K)},J.onsuccess=function(){var K=J.result;K&&K.close(),H(K)}});return k.then(function(H){O.db=H;for(var W=0;W<N.length;W++){var J=N[W];Q(J._dbInfo)}}).catch(function(H){throw(ne(r,H)||h.resolve()).catch(function(){}),H})})}return A(l,i),l}o(Ft,"sr");var Gn={_driver:"asyncStorage",_initStorage:P,_support:y(),iterate:ee,getItem:X,setItem:_e,removeItem:ge,clear:we,length:kt,key:xt,keys:Ut,dropInstance:Ft};function Gt(){return typeof openDatabase=="function"}o(Gt,"lr");var Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bn="~~local_forage_type~",Bt=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",at=Be.length,st="arbf",ut="blob",Wt="si08",qt="ui08",Ht="uic8",Xt="si16",Vt="si32",zt="ur16",Yt="ui32",Kt="fl32",Jt="fl64",Qt=at+st.length,Zt=Object.prototype.toString;function ct(r){var i=r.length*.75,a=r.length,f,l=0,d,m,b,O;r[r.length-1]==="="&&(i--,r[r.length-2]==="="&&i--);var N=new ArrayBuffer(i),w=new Uint8Array(N);for(f=0;f<a;f+=4)d=Ee.indexOf(r[f]),m=Ee.indexOf(r[f+1]),b=Ee.indexOf(r[f+2]),O=Ee.indexOf(r[f+3]),w[l++]=d<<2|m>>4,w[l++]=(m&15)<<4|b>>2,w[l++]=(b&3)<<6|O&63;return N}o(ct,"He");function We(r){var i=new Uint8Array(r),a="",f;for(f=0;f<i.length;f+=3)a+=Ee[i[f]>>2],a+=Ee[(i[f]&3)<<4|i[f+1]>>4],a+=Ee[(i[f+1]&15)<<2|i[f+2]>>6],a+=Ee[i[f+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}o(We,"we");function er(r,i){var a="";if(r&&(a=Zt.call(r)),r&&(a==="[object ArrayBuffer]"||r.buffer&&Zt.call(r.buffer)==="[object ArrayBuffer]")){var f,l=Be;r instanceof ArrayBuffer?(f=r,l+=st):(f=r.buffer,a==="[object Int8Array]"?l+=Wt:a==="[object Uint8Array]"?l+=qt:a==="[object Uint8ClampedArray]"?l+=Ht:a==="[object Int16Array]"?l+=Xt:a==="[object Uint16Array]"?l+=zt:a==="[object Int32Array]"?l+=Vt:a==="[object Uint32Array]"?l+=Yt:a==="[object Float32Array]"?l+=Kt:a==="[object Float64Array]"?l+=Jt:i(new Error("Failed to get type for BinaryArray"))),i(l+We(f))}else if(a==="[object Blob]"){var d=new FileReader;d.onload=function(){var m=Bn+r.type+"~"+We(this.result);i(Be+ut+m)},d.readAsArrayBuffer(r)}else try{i(JSON.stringify(r))}catch(m){console.error("Couldn't convert value into a JSON string: ",r),i(null,m)}}o(er,"vr");function tr(r){if(r.substring(0,at)!==Be)return JSON.parse(r);var i=r.substring(Qt),a=r.substring(at,Qt),f;if(a===ut&&Bt.test(i)){var l=i.match(Bt);f=l[1],i=i.substring(l[0].length)}var d=ct(i);switch(a){case st:return d;case ut:return E([d],{type:f});case Wt:return new Int8Array(d);case qt:return new Uint8Array(d);case Ht:return new Uint8ClampedArray(d);case Xt:return new Int16Array(d);case zt:return new Uint16Array(d);case Vt:return new Int32Array(d);case Yt:return new Uint32Array(d);case Kt:return new Float32Array(d);case Jt:return new Float64Array(d);default:throw new Error("Unkown type: "+a)}}o(tr,"hr");var lt={serialize:er,deserialize:tr,stringToBuffer:ct,bufferToString:We};function ft(r,i,a,f){r.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,f)}o(ft,"Ve");function rr(r){var i=this,a={db:null};if(r)for(var f in r)a[f]=typeof r[f]!="string"?r[f].toString():r[f];var l=new h(function(d,m){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(b){return m(b)}a.db.transaction(function(b){ft(b,a,function(){i._dbInfo=a,d()},function(O,N){m(N)})},m)});return a.serializer=lt,l}o(rr,"mr");function he(r,i,a,f,l,d){r.executeSql(a,f,l,function(m,b){b.code===b.SYNTAX_ERR?m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(O,N){N.rows.length?d(O,b):ft(O,i,function(){O.executeSql(a,f,l,d)},d)},d):d(m,b)},d)}o(he,"ne");function nr(r,i){var a=this;r=C(r);var f=new h(function(l,d){a.ready().then(function(){var m=a._dbInfo;m.db.transaction(function(b){he(b,m,"SELECT * FROM "+m.storeName+" WHERE key = ? LIMIT 1",[r],function(O,N){var w=N.rows.length?N.rows.item(0).value:null;w&&(w=m.serializer.deserialize(w)),l(w)},function(O,N){d(N)})})}).catch(d)});return A(f,i),f}o(nr,"yr");function or(r,i){var a=this,f=new h(function(l,d){a.ready().then(function(){var m=a._dbInfo;m.db.transaction(function(b){he(b,m,"SELECT * FROM "+m.storeName,[],function(O,N){for(var w=N.rows,M=w.length,k=0;k<M;k++){var H=w.item(k),W=H.value;if(W&&(W=m.serializer.deserialize(W)),W=r(W,H.key,k+1),W!==void 0){l(W);return}}l()},function(O,N){d(N)})})}).catch(d)});return A(f,i),f}o(or,"pr");function dt(r,i,a,f){var l=this;r=C(r);var d=new h(function(m,b){l.ready().then(function(){i===void 0&&(i=null);var O=i,N=l._dbInfo;N.serializer.serialize(i,function(w,M){M?b(M):N.db.transaction(function(k){he(k,N,"INSERT OR REPLACE INTO "+N.storeName+" (key, value) VALUES (?, ?)",[r,w],function(){m(O)},function(H,W){b(W)})},function(k){if(k.code===k.QUOTA_ERR){if(f>0){m(dt.apply(l,[r,O,a,f-1]));return}b(k)}})})}).catch(b)});return A(d,a),d}o(dt,"Ge");function ir(r,i,a){return dt.apply(this,[r,i,a,1])}o(ir,"gr");function ar(r,i){var a=this;r=C(r);var f=new h(function(l,d){a.ready().then(function(){var m=a._dbInfo;m.db.transaction(function(b){he(b,m,"DELETE FROM "+m.storeName+" WHERE key = ?",[r],function(){l()},function(O,N){d(N)})})}).catch(d)});return A(f,i),f}o(ar,"br");function sr(r){var i=this,a=new h(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(m){he(m,d,"DELETE FROM "+d.storeName,[],function(){f()},function(b,O){l(O)})})}).catch(l)});return A(a,r),a}o(sr,"_r");function ur(r){var i=this,a=new h(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(m){he(m,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,O){var N=O.rows.item(0).c;f(N)},function(b,O){l(O)})})}).catch(l)});return A(a,r),a}o(ur,"wr");function cr(r,i){var a=this,f=new h(function(l,d){a.ready().then(function(){var m=a._dbInfo;m.db.transaction(function(b){he(b,m,"SELECT key FROM "+m.storeName+" WHERE id = ? LIMIT 1",[r+1],function(O,N){var w=N.rows.length?N.rows.item(0).key:null;l(w)},function(O,N){d(N)})})}).catch(d)});return A(f,i),f}o(cr,"Er");function lr(r){var i=this,a=new h(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(m){he(m,d,"SELECT key FROM "+d.storeName,[],function(b,O){for(var N=[],w=0;w<O.rows.length;w++)N.push(O.rows.item(w).key);f(N)},function(b,O){l(O)})})}).catch(l)});return A(a,r),a}o(lr,"Ir");function fr(r){return new h(function(i,a){r.transaction(function(f){f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(l,d){for(var m=[],b=0;b<d.rows.length;b++)m.push(d.rows.item(b).name);i({db:r,storeNames:m})},function(l,d){a(d)})},function(f){a(f)})})}o(fr,"Sr");function dr(r,i){i=x.apply(this,arguments);var a=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a.name,r.storeName=r.storeName||a.storeName);var f=this,l;return r.name?l=new h(function(d){var m;r.name===a.name?m=f._dbInfo.db:m=openDatabase(r.name,"","",0),r.storeName?d({db:m,storeNames:[r.storeName]}):d(fr(m))}).then(function(d){return new h(function(m,b){d.db.transaction(function(O){function N(H){return new h(function(W,J){O.executeSql("DROP TABLE IF EXISTS "+H,[],function(){W()},function(K,ae){J(ae)})})}o(N,"l");for(var w=[],M=0,k=d.storeNames.length;M<k;M++)w.push(N(d.storeNames[M]));h.all(w).then(function(){m()}).catch(function(H){b(H)})},function(O){b(O)})})}):l=h.reject("Invalid arguments"),A(l,i),l}o(dr,"Ar");var Wn={_driver:"webSQLStorage",_initStorage:rr,_support:Gt(),iterate:or,getItem:nr,setItem:ir,removeItem:ar,clear:sr,length:ur,key:cr,keys:lr,dropInstance:dr};function hr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}o(hr,"Dr");function ht(r,i){var a=r.name+"/";return r.storeName!==i.storeName&&(a+=r.storeName+"/"),a}o(ht,"je");function pr(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}o(pr,"Nr");function vr(){return!pr()||localStorage.length>0}o(vr,"Tr");function mr(r){var i=this,a={};if(r)for(var f in r)a[f]=r[f];return a.keyPrefix=ht(r,i._defaultConfig),vr()?(i._dbInfo=a,a.serializer=lt,h.resolve()):h.reject()}o(mr,"Br");function yr(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo.keyPrefix,l=localStorage.length-1;l>=0;l--){var d=localStorage.key(l);d.indexOf(f)===0&&localStorage.removeItem(d)}});return A(a,r),a}o(yr,"xr");function gr(r,i){var a=this;r=C(r);var f=a.ready().then(function(){var l=a._dbInfo,d=localStorage.getItem(l.keyPrefix+r);return d&&(d=l.serializer.deserialize(d)),d});return A(f,i),f}o(gr,"Or");function Er(r,i){var a=this,f=a.ready().then(function(){for(var l=a._dbInfo,d=l.keyPrefix,m=d.length,b=localStorage.length,O=1,N=0;N<b;N++){var w=localStorage.key(N);if(w.indexOf(d)===0){var M=localStorage.getItem(w);if(M&&(M=l.serializer.deserialize(M)),M=r(M,w.substring(m),O++),M!==void 0)return M}}});return A(f,i),f}o(Er,"Cr");function _r(r,i){var a=this,f=a.ready().then(function(){var l=a._dbInfo,d;try{d=localStorage.key(r)}catch{d=null}return d&&(d=d.substring(l.keyPrefix.length)),d});return A(f,i),f}o(_r,"Lr");function br(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo,l=localStorage.length,d=[],m=0;m<l;m++){var b=localStorage.key(m);b.indexOf(f.keyPrefix)===0&&d.push(b.substring(f.keyPrefix.length))}return d});return A(a,r),a}o(br,"Pr");function Ir(r){var i=this,a=i.keys().then(function(f){return f.length});return A(a,r),a}o(Ir,"Mr");function wr(r,i){var a=this;r=C(r);var f=a.ready().then(function(){var l=a._dbInfo;localStorage.removeItem(l.keyPrefix+r)});return A(f,i),f}o(wr,"Fr");function Nr(r,i,a){var f=this;r=C(r);var l=f.ready().then(function(){i===void 0&&(i=null);var d=i;return new h(function(m,b){var O=f._dbInfo;O.serializer.serialize(i,function(N,w){if(w)b(w);else try{localStorage.setItem(O.keyPrefix+r,N),m(d)}catch(M){(M.name==="QuotaExceededError"||M.name==="NS_ERROR_DOM_QUOTA_REACHED")&&b(M),b(M)}})})});return A(l,a),l}o(Nr,"Ur");function Or(r,i){if(i=x.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var a=this.config();r.name=r.name||a.name,r.storeName=r.storeName||a.storeName}var f=this,l;return r.name?l=new h(function(d){r.storeName?d(ht(r,f._defaultConfig)):d(r.name+"/")}).then(function(d){for(var m=localStorage.length-1;m>=0;m--){var b=localStorage.key(m);b.indexOf(d)===0&&localStorage.removeItem(b)}}):l=h.reject("Invalid arguments"),A(l,i),l}o(Or,"Yr");var qn={_driver:"localStorageWrapper",_initStorage:mr,_support:hr(),iterate:Er,getItem:gr,setItem:Nr,removeItem:wr,clear:yr,length:Ir,key:_r,keys:br,dropInstance:Or},Hn=o(function(r,i){return r===i||typeof r=="number"&&typeof i=="number"&&isNaN(r)&&isNaN(i)},"Wr"),Xn=o(function(r,i){for(var a=r.length,f=0;f<a;){if(Hn(r[f],i))return!0;f++}return!1},"Kr"),Rr=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Me={},Sr={},Ne={INDEXEDDB:Gn,WEBSQL:Wn,LOCALSTORAGE:qn},Vn=[Ne.INDEXEDDB._driver,Ne.WEBSQL._driver,Ne.LOCALSTORAGE._driver],qe=["dropInstance"],pt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(qe),zn={description:"",driver:Vn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ar(r,i){r[i]=function(){var a=arguments;return r.ready().then(function(){return r[i].apply(r,a)})}}o(Ar,"Gr");function He(){for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i)for(var a in i)i.hasOwnProperty(a)&&(Rr(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}o(He,"Se");var Yn=function(){function r(i){g(this,r);for(var a in Ne)if(Ne.hasOwnProperty(a)){var f=Ne[a],l=f._driver;this[a]=l,Me[l]||this.defineDriver(f)}this._defaultConfig=He({},zn),this._config=He({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o(r,"e"),r.prototype.config=function(i){if((typeof i>"u"?"undefined":u(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,a,f){var l=new h(function(d,m){try{var b=i._driver,O=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){m(O);return}for(var N=pt.concat("_initStorage"),w=0,M=N.length;w<M;w++){var k=N[w],H=!Xn(qe,k);if((H||i[k])&&typeof i[k]!="function"){m(O);return}}var W=o(function(){for(var K=function(Jn){return function(){var Qn=new Error("Method "+Jn+" is not implemented by the current driver"),Tr=h.reject(Qn);return A(Tr,arguments[arguments.length-1]),Tr}},ae=0,vt=qe.length;ae<vt;ae++){var mt=qe[ae];i[mt]||(i[mt]=K(mt))}},"V");W();var J=o(function(K){Me[b]&&console.info("Redefining LocalForage driver: "+b),Me[b]=i,Sr[b]=K,d()},"W");"_support"in i?i._support&&typeof i._support=="function"?i._support().then(J,m):J(!!i._support):J(!0)}catch(K){m(K)}});return j(l,a,f),l},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,a,f){var l=Me[i]?h.resolve(Me[i]):h.reject(new Error("Driver not found."));return j(l,a,f),l},r.prototype.getSerializer=function(i){var a=h.resolve(lt);return j(a,i),a},r.prototype.ready=function(i){var a=this,f=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return j(f,i,i),f},r.prototype.setDriver=function(i,a,f){var l=this;Rr(i)||(i=[i]);var d=this._getSupportedDrivers(i);function m(){l._config.driver=l.driver()}o(m,"u");function b(w){return l._extend(w),m(),l._ready=l._initStorage(l._config),l._ready}o(b,"c");function O(w){return function(){var M=0;function k(){for(;M<w.length;){var H=w[M];return M++,l._dbInfo=null,l._ready=null,l.getDriver(H).then(b).catch(k)}m();var W=new Error("No available storage method found.");return l._driverSet=h.reject(W),l._driverSet}return o(k,"T"),k()}}o(O,"l");var N=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=N.then(function(){var w=d[0];return l._dbInfo=null,l._ready=null,l.getDriver(w).then(function(M){l._driver=M._driver,m(),l._wrapLibraryMethodsWithReady(),l._initDriver=O(d)})}).catch(function(){m();var w=new Error("No available storage method found.");return l._driverSet=h.reject(w),l._driverSet}),j(this._driverSet,a,f),this._driverSet},r.prototype.supports=function(i){return!!Sr[i]},r.prototype._extend=function(i){He(this,i)},r.prototype._getSupportedDrivers=function(i){for(var a=[],f=0,l=i.length;f<l;f++){var d=i[f];this.supports(d)&&a.push(d)}return a},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=pt.length;i<a;i++)Ar(this,pt[i])},r.prototype.createInstance=function(i){return new r(i)},r}(),Kn=new Yn;s.exports=Kn},{3:3}]},{},[4])(4)})}),wi=kn((e,t)=>{(function(n,s){typeof e=="object"&&typeof t<"u"?s(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],s):s(n.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(n){var s="localforage-driver-memory";function c(p){var _=typeof Symbol=="function"&&p[Symbol.iterator],S=0;return _?_.call(p):{next:function(){return p&&S>=p.length&&(p=void 0),{value:p&&p[S++],done:!p}}}}o(c,"O");function u(p,_){p=p||[],_=_||{};try{return new Blob(p,_)}catch(P){if(P.name!=="TypeError")throw P;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,L=new S,$=0;$<p.length;$+=1)L.append(p[$]);return L.getBlob(_.type)}}o(u,"L");var g=/^~~local_forage_type~([^~]+)~/,v=9,I=v+4,y=Object.prototype.toString;function E(p){var _=p.length*.75,S=p.length;p[p.length-1]==="="&&(_--,p[p.length-2]==="="&&_--);for(var L=new ArrayBuffer(_),$=new Uint8Array(L),P=0,X=0;P<S;P+=4){var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P]),_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+1]),ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+2]),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+3]);$[X++]=ee<<2|_e>>4,$[X++]=(_e&15)<<4|ge>>2,$[X++]=(ge&3)<<6|we&63}return L}o(E,"S");function h(p){for(var _=new Uint8Array(p),S="",L=0;L<_.length;L+=3)S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[L]>>2],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[L]&3)<<4|_[L+1]>>4],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[L+1]&15)<<2|_[L+2]>>6],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[L+2]&63];return _.length%3===2?S=S.substring(0,S.length-1)+"=":_.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}o(h,"P");function A(p,_){var S="";if(p&&(S=y.call(p)),p&&(S==="[object ArrayBuffer]"||p.buffer&&y.call(p.buffer)==="[object ArrayBuffer]")){var L=void 0,$="__lfsc__:";p instanceof ArrayBuffer?(L=p,$+="arbf"):(L=p.buffer,S==="[object Int8Array]"?$+="si08":S==="[object Uint8Array]"?$+="ui08":S==="[object Uint8ClampedArray]"?$+="uic8":S==="[object Int16Array]"?$+="si16":S==="[object Uint16Array]"?$+="ur16":S==="[object Int32Array]"?$+="si32":S==="[object Uint32Array]"?$+="ui32":S==="[object Float32Array]"?$+="fl32":S==="[object Float64Array]"?$+="fl64":_(new Error("Failed to get type for BinaryArray"))),_($+h(L))}else if(S==="[object Blob]"){var P=new FileReader;P.onload=function(){var X="~~local_forage_type~"+p.type+"~"+h(this.result);_("__lfsc__:blob"+X)},P.readAsArrayBuffer(p)}else try{_(JSON.stringify(p))}catch(X){console.error("Couldn't convert value into a JSON string: ",p),_(null,X)}}o(A,"K");function j(p){if(p.substring(0,v)!=="__lfsc__:")return JSON.parse(p);var _=p.substring(I),S=p.substring(v,I),L;if(S==="blob"&&g.test(_)){var $=_.match(g);L=$[1],_=_.substring($[0].length)}var P=E(_);switch(S){case"arbf":return P;case"blob":return u([P],{type:L});case"si08":return new Int8Array(P);case"ui08":return new Uint8Array(P);case"uic8":return new Uint8ClampedArray(P);case"si16":return new Int16Array(P);case"ur16":return new Uint16Array(P);case"si32":return new Int32Array(P);case"ui32":return new Uint32Array(P);case"fl32":return new Float32Array(P);case"fl64":return new Float64Array(P);default:throw new Error("Unkown type: "+S)}}o(j,"Z");function C(p){var _,S;if(p===null||typeof p!="object"||"isActiveClone"in p)return p;var L=p instanceof Date?new Date(p):p.constructor();try{for(var $=c(Object.keys(p)),P=$.next();!P.done;P=$.next()){var X=P.value;Object.prototype.hasOwnProperty.call(p,X)&&(p.isActiveClone=null,L[X]=C(p[X]),delete p.isActiveClone)}}catch(ee){_={error:ee}}finally{try{P&&!P.done&&(S=$.return)&&S.call($)}finally{if(_)throw _.error}}return L}o(C,"m");function x(p,_){return(p.name||_.name)+"/"+(p.storeName||_.storeName)+"/"}o(x,"w");function T(p,_){_&&p.then(function(S){_(null,S)},function(S){_(S)})}o(T,"N");function z(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}o(z,"z");function G(p,_){var S=this;if(_=z.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var L=this.config();p.name=p.name||L.name,p.storeName=p.storeName||L.storeName}var $;return p.name?$=new Promise(function(P){p.storeName?P(x(p,S._defaultConfig)):P(p.name+"/")}):$=Promise.reject("Invalid arguments"),{promise:$,callback:_}}o(G,"q");function B(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}o(B,"F");var le={bufferToString:h,deserialize:j,serialize:A,stringToBuffer:E},R={},U=function(){function p(_){this.kp=_,this.data={}}return o(p,"a"),p.resolve=function(_){return R[_]||(R[_]=new p(_)),R[_]},p.prototype.clear=function(){this.data={}},p.prototype.drop=function(){this.clear(),delete R[this.kp]},p.prototype.get=function(_){return this.data[_]},p.prototype.key=function(_){return this.keys()[_]},p.prototype.keys=function(){return Object.keys(this.data)},p.prototype.rm=function(_){delete this.data[_]},p.prototype.set=function(_,S){this.data[_]=S},p}();function D(p){var _=p?C(p):{},S=x(_,this._defaultConfig),L=U.resolve(S);return this._dbInfo=_,this._dbInfo.serializer=le,this._dbInfo.keyPrefix=S,this._dbInfo.mStore=L,Promise.resolve()}o(D,"re");function F(p){var _=this,S=this.ready().then(function(){_._dbInfo.mStore.clear()});return T(S,p),S}o(F,"h");function Y(p,_){var S=G.apply(this,arguments),L=S.promise,$=S.callback,P=L.then(function(X){U.resolve(X).drop()});return T(P,$),L}o(Y,"R");function Q(p,_){var S=this;p=B(p);var L=this.ready().then(function(){var $=S._dbInfo.mStore.get(p);return $==null?null:S._dbInfo.serializer.deserialize($)});return T(L,_),L}o(Q,"I");function ne(p,_){var S=this,L=this.ready().then(function(){for(var $=S._dbInfo.mStore,P=$.keys(),X=0;X<P.length;X++){var ee=$.get(P[X]);if(ee&&(ee=S._dbInfo.serializer.deserialize(ee)),ee=p(ee,P[X],X+1),ee!==void 0)return ee}});return T(L,_),L}o(ne,"B");function oe(p,_){var S=this,L=this.ready().then(function(){var $;try{$=S._dbInfo.mStore.key(p),$===void 0&&($=null)}catch{$=null}return $});return T(L,_),L}o(oe,"H");function ce(p){var _=this,S=this.ready().then(function(){return _._dbInfo.mStore.keys()});return T(S,p),S}o(ce,"j");function fe(p){var _=this.keys().then(function(S){return S.length});return T(_,p),_}o(fe,"J");function me(p,_){var S=this;p=B(p);var L=this.ready().then(function(){S._dbInfo.mStore.rm(p)});return T(L,_),L}o(me,"$");function ye(p,_,S){var L=this;p=B(p);var $=this.ready().then(function(){_===void 0&&(_=null);var P=_;return new Promise(function(X,ee){L._dbInfo.serializer.serialize(_,function(_e,ge){if(ge)ee(ge);else try{L._dbInfo.mStore.set(p,_e),X(P)}catch(we){ee(we)}})})});return T($,S),$}o(ye,"ee");var de=!0;n._support=de,n._driver=s,n._initStorage=D,n.clear=F,n.dropInstance=Y,n.getItem=Q,n.iterate=ne,n.key=oe,n.keys=ce,n.length=fe,n.removeItem=me,n.setItem=ye,Object.defineProperty(n,"__esModule",{value:!0})})}),gt=xn(Ii()),Wr=xn(wi()),Ni={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Un(e){for(let[t,n]of Object.entries(Ni))e.style[t]=n}o(Un,"ut");function Fn(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}o(Fn,"st");var Oi=o(class extends pi{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=o(()=>{if(Fn(encodeURIComponent(this.parameters)))ln().log();else{let n=document.createElement("iframe");n.classList.add("magic-iframe"),n.dataset.magicIframeLabel=xe(this.endpoint).host,n.title="Secure Modal",n.src=xe(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Un(n),document.body.appendChild(n),e(n)}},"O");["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let n of this.messageHandlers.values())n(e)}})}showOverlay(){return Ze(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return Ze(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return Ze(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw on()})}},"Te"),Si=tn($n,{platform:"web",sdkName:"magic-sdk",version:"8.1.1",defaultEndpoint:"https://auth.magic.link/",ViewController:Oi,configureStorage:()=>Ze(void 0,null,function*(){let e=gt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Wr),yield e.setDriver([gt.default.INDEXEDDB,gt.default.LOCALSTORAGE,Wr._driver]),e})});export{Zn as EthChainType,Pe as Extension,rn as ExtensionError,Gr as ExtensionWarning,Si as Magic,Se as MagicIncomingWindowMessage,et as MagicOutgoingWindowMessage,V as MagicPayloadMethod,rt as RPCError,It as RPCErrorCode,Ie as SDKError,be as SDKErrorCode,Rt as SDKWarning,it as SDKWarningCode,yn as isPromiEvent};
